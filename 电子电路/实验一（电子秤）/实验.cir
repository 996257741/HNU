** t2 **
* 
* NI Multisim to SPICE Netlist Export
* Generated by: lian ton
* Sun, Nov 03, 2024 20:00:29 
*

*## Multisim Component V2 ##*
vV2 20 0 dc 20 ac 0 0
+           distof1 0 0
+           distof2 0 0

*## Multisim Component V8 ##*
aV8 38 14 THERMAL_NOISEV8
.MODEL THERMAL_NOISEV8 noise_source(
+ noise_ratio= 50   bandwith= 10000000 )

*## Multisim Component U12 ##*
xU12 24 38 38 3T_VirtualU12 PARAMS: Vos=0 Ib=0 Ioff=0 Av=2000000 BW=100000000 Rin=10000000 Rout=10 Vpos=1200 Vneg=-1200 

.SUBCKT 3T_VirtualU12 in_pos in_neg out PARAMS: Av=500k BW=10Meg Rin=10Meg Rout=0 Vos=0 Ib=0 Ioff=0 Vpos=15 Vneg=-15 

* Input Stage: Rin, Ibias, Voffset
Vos in_pos 4 {Vos}
Ibias1 4 0 {Ib}
Ibias2 in_neg 0 {Ib}
Ios 4 in_neg {Ioff/2}
Rin 4 in_neg {Rin}

*Middle stage: Gain, frequency, voltage limiting
Bgain 0 6 I={v(4,in_neg)*Av/1meg }
R1 6 0 1meg
CP1 6 0 {Av/(2*pi*1meg*BW)}


Vpos 9 0 {Vpos}
Dlimit_pos 6 9 d1

Vneg 10 0 {Vneg}
Dlimit_neg 10 6 d1

.model d1 d(n=0.1) 

*Output stage: Buffer, output resistance 
E2 7 0 6 0 1
Rout 7 out {Rout}
.ends

*## Multisim Component U11 ##*
xU11    26
+      25
+      0
+      dU11.D0
+      dU11.D1
+      dU11.D2
+      dU11.D3
+      dU11.D4
+      dU11.D5
+      dU11.D6
+      dU11.D7
+      dU11.SOC
+      dU11.caretEOC ADC8__ADC_DAC__1

xU11.D0 dU11.D0 28 TIL_DRV__NON__1


xU11.D1 dU11.D1 29 TIL_DRV__NON__1


xU11.D2 dU11.D2 30 TIL_DRV__NON__1


xU11.D3 dU11.D3 31 TIL_DRV__NON__1


xU11.D4 dU11.D4 32 TIL_DRV__NON__1


xU11.D5 dU11.D5 33 TIL_DRV__NON__1


xU11.D6 dU11.D6 34 TIL_DRV__NON__1


xU11.D7 dU11.D7 35 TIL_DRV__NON__1


xU11.SOC 27 dU11.SOC TIL_RCV__NON__1


xU11.caretEOC dU11.caretEOC 36 TIL_DRV__NON__1


*## Multisim Instrument XSC1 ##*


*## Multisim Component U10 ##*
xU10 23 26 26 3T_VirtualU10 PARAMS: Vos=0 Ib=0 Ioff=0 Av=2000000 BW=100000000 Rin=10000000 Rout=10 Vpos=1200 Vneg=-1200 

.SUBCKT 3T_VirtualU10 in_pos in_neg out PARAMS: Av=500k BW=10Meg Rin=10Meg Rout=0 Vos=0 Ib=0 Ioff=0 Vpos=15 Vneg=-15 

* Input Stage: Rin, Ibias, Voffset
Vos in_pos 4 {Vos}
Ibias1 4 0 {Ib}
Ibias2 in_neg 0 {Ib}
Ios 4 in_neg {Ioff/2}
Rin 4 in_neg {Rin}

*Middle stage: Gain, frequency, voltage limiting
Bgain 0 6 I={v(4,in_neg)*Av/1meg }
R1 6 0 1meg
CP1 6 0 {Av/(2*pi*1meg*BW)}


Vpos 9 0 {Vpos}
Dlimit_pos 6 9 d1

Vneg 10 0 {Vneg}
Dlimit_neg 10 6 d1

.model d1 d(n=0.1) 

*Output stage: Buffer, output resistance 
E2 7 0 6 0 1
Rout 7 out {Rout}
.ends

*## Multisim Component R1 ##*
rR1 22 0 20 vresR1  
.model vresR1 r(  )

*## Multisim Component C1 ##*
cC1 0 21 4.6e-007

*## Multisim Component R4 ##*
rR4 23 22 20 vresR4  
.model vresR4 r(  )

*## Multisim Component R2 ##*
rR2 21 14 200000 vresR2  
.model vresR2 r(  )

*## Multisim Component U6 ##*
xU6 21 22 23 3T_VirtualU6 PARAMS: Vos=0 Ib=0 Ioff=0 Av=2000000 BW=100000000 Rin=10000000 Rout=10 Vpos=1200 Vneg=-1200 

.SUBCKT 3T_VirtualU6 in_pos in_neg out PARAMS: Av=500k BW=10Meg Rin=10Meg Rout=0 Vos=0 Ib=0 Ioff=0 Vpos=15 Vneg=-15 

* Input Stage: Rin, Ibias, Voffset
Vos in_pos 4 {Vos}
Ibias1 4 0 {Ib}
Ibias2 in_neg 0 {Ib}
Ios 4 in_neg {Ioff/2}
Rin 4 in_neg {Rin}

*Middle stage: Gain, frequency, voltage limiting
Bgain 0 6 I={v(4,in_neg)*Av/1meg }
R1 6 0 1meg
CP1 6 0 {Av/(2*pi*1meg*BW)}


Vpos 9 0 {Vpos}
Dlimit_pos 6 9 d1

Vneg 10 0 {Vneg}
Dlimit_neg 10 6 d1

.model d1 d(n=0.1) 

*Output stage: Buffer, output resistance 
E2 7 0 6 0 1
Rout 7 out {Rout}
.ends

*## Multisim Component X5 ##*
* !!!BEGIN-INTERACT
*  : v_level            ++++f2 ;
*  0.0       VARIABLE   r1Volt
*  0.0       VARIABLE   r1Cur
*
*  :UPDATE_SETTINGS
*       1 5 0 SET_SUBCOMP_PRP
*       0 7 0 SET_SUBCOMP_PRP
*       0 8 0 SET_SUBCOMP_PRP
*       0 9 0 SET_SUBCOMP_PRP
*       0 10 0 SET_SUBCOMP_PRP
*       0 11 0 SET_SUBCOMP_PRP
*       0 12 0 SET_SUBCOMP_PRP
*       0 13 0 SET_SUBCOMP_PRP
*       0 14 0 SET_SUBCOMP_PRP
*       0.0 ==>_*r1Volt
*       0.0 ==>_*r1Cur
*  ;   
*
*  :OUT_DATA
*   GET_INSTANCE Resistor ::R r1 i  ==>_*r1Cur
*   1.0e12 *r1Cur f.*  ==>_*r1Volt
*   v_level *r1Volt  f.<=   if
*       0 5 0 SET_SUBCOMP_PRP
*       1 7 0 SET_SUBCOMP_PRP
*       1 8 0 SET_SUBCOMP_PRP
*       1 9 0 SET_SUBCOMP_PRP
*       1 10 0 SET_SUBCOMP_PRP
*       1 11 0 SET_SUBCOMP_PRP
*       1 12 0 SET_SUBCOMP_PRP
*       1 13 0 SET_SUBCOMP_PRP
*       1 14 0 SET_SUBCOMP_PRP
*   else
*       1 5 0 SET_SUBCOMP_PRP
*       0 7 0 SET_SUBCOMP_PRP
*       0 8 0 SET_SUBCOMP_PRP
*       0 9 0 SET_SUBCOMP_PRP
*       0 10 0 SET_SUBCOMP_PRP
*       0 11 0 SET_SUBCOMP_PRP
*       0 12 0 SET_SUBCOMP_PRP
*       0 13 0 SET_SUBCOMP_PRP
*       0 14 0 SET_SUBCOMP_PRP
*   endif
*  ;
*
*  :BEGIN_PLOT
*     UPDATE_SETTINGS
*  ;
* !!!END-INTERACT
xX5 32 ProbeX5
.subckt ProbeX5 1  
R1 1 0 1e12
.ends

*## Multisim Component X4 ##*
* !!!BEGIN-INTERACT
*  : v_level            ++++f2 ;
*  0.0       VARIABLE   r1Volt
*  0.0       VARIABLE   r1Cur
*
*  :UPDATE_SETTINGS
*       1 5 0 SET_SUBCOMP_PRP
*       0 7 0 SET_SUBCOMP_PRP
*       0 8 0 SET_SUBCOMP_PRP
*       0 9 0 SET_SUBCOMP_PRP
*       0 10 0 SET_SUBCOMP_PRP
*       0 11 0 SET_SUBCOMP_PRP
*       0 12 0 SET_SUBCOMP_PRP
*       0 13 0 SET_SUBCOMP_PRP
*       0 14 0 SET_SUBCOMP_PRP
*       0.0 ==>_*r1Volt
*       0.0 ==>_*r1Cur
*  ;   
*
*  :OUT_DATA
*   GET_INSTANCE Resistor ::R r1 i  ==>_*r1Cur
*   1.0e12 *r1Cur f.*  ==>_*r1Volt
*   v_level *r1Volt  f.<=   if
*       0 5 0 SET_SUBCOMP_PRP
*       1 7 0 SET_SUBCOMP_PRP
*       1 8 0 SET_SUBCOMP_PRP
*       1 9 0 SET_SUBCOMP_PRP
*       1 10 0 SET_SUBCOMP_PRP
*       1 11 0 SET_SUBCOMP_PRP
*       1 12 0 SET_SUBCOMP_PRP
*       1 13 0 SET_SUBCOMP_PRP
*       1 14 0 SET_SUBCOMP_PRP
*   else
*       1 5 0 SET_SUBCOMP_PRP
*       0 7 0 SET_SUBCOMP_PRP
*       0 8 0 SET_SUBCOMP_PRP
*       0 9 0 SET_SUBCOMP_PRP
*       0 10 0 SET_SUBCOMP_PRP
*       0 11 0 SET_SUBCOMP_PRP
*       0 12 0 SET_SUBCOMP_PRP
*       0 13 0 SET_SUBCOMP_PRP
*       0 14 0 SET_SUBCOMP_PRP
*   endif
*  ;
*
*  :BEGIN_PLOT
*     UPDATE_SETTINGS
*  ;
* !!!END-INTERACT
xX4 31 ProbeX4
.subckt ProbeX4 1  
R1 1 0 1e12
.ends

*## Multisim Component X3 ##*
* !!!BEGIN-INTERACT
*  : v_level            ++++f2 ;
*  0.0       VARIABLE   r1Volt
*  0.0       VARIABLE   r1Cur
*
*  :UPDATE_SETTINGS
*       1 5 0 SET_SUBCOMP_PRP
*       0 7 0 SET_SUBCOMP_PRP
*       0 8 0 SET_SUBCOMP_PRP
*       0 9 0 SET_SUBCOMP_PRP
*       0 10 0 SET_SUBCOMP_PRP
*       0 11 0 SET_SUBCOMP_PRP
*       0 12 0 SET_SUBCOMP_PRP
*       0 13 0 SET_SUBCOMP_PRP
*       0 14 0 SET_SUBCOMP_PRP
*       0.0 ==>_*r1Volt
*       0.0 ==>_*r1Cur
*  ;   
*
*  :OUT_DATA
*   GET_INSTANCE Resistor ::R r1 i  ==>_*r1Cur
*   1.0e12 *r1Cur f.*  ==>_*r1Volt
*   v_level *r1Volt  f.<=   if
*       0 5 0 SET_SUBCOMP_PRP
*       1 7 0 SET_SUBCOMP_PRP
*       1 8 0 SET_SUBCOMP_PRP
*       1 9 0 SET_SUBCOMP_PRP
*       1 10 0 SET_SUBCOMP_PRP
*       1 11 0 SET_SUBCOMP_PRP
*       1 12 0 SET_SUBCOMP_PRP
*       1 13 0 SET_SUBCOMP_PRP
*       1 14 0 SET_SUBCOMP_PRP
*   else
*       1 5 0 SET_SUBCOMP_PRP
*       0 7 0 SET_SUBCOMP_PRP
*       0 8 0 SET_SUBCOMP_PRP
*       0 9 0 SET_SUBCOMP_PRP
*       0 10 0 SET_SUBCOMP_PRP
*       0 11 0 SET_SUBCOMP_PRP
*       0 12 0 SET_SUBCOMP_PRP
*       0 13 0 SET_SUBCOMP_PRP
*       0 14 0 SET_SUBCOMP_PRP
*   endif
*  ;
*
*  :BEGIN_PLOT
*     UPDATE_SETTINGS
*  ;
* !!!END-INTERACT
xX3 30 ProbeX3
.subckt ProbeX3 1  
R1 1 0 1e12
.ends

*## Multisim Component X2 ##*
* !!!BEGIN-INTERACT
*  : v_level            ++++f2 ;
*  0.0       VARIABLE   r1Volt
*  0.0       VARIABLE   r1Cur
*
*  :UPDATE_SETTINGS
*       1 5 0 SET_SUBCOMP_PRP
*       0 7 0 SET_SUBCOMP_PRP
*       0 8 0 SET_SUBCOMP_PRP
*       0 9 0 SET_SUBCOMP_PRP
*       0 10 0 SET_SUBCOMP_PRP
*       0 11 0 SET_SUBCOMP_PRP
*       0 12 0 SET_SUBCOMP_PRP
*       0 13 0 SET_SUBCOMP_PRP
*       0 14 0 SET_SUBCOMP_PRP
*       0.0 ==>_*r1Volt
*       0.0 ==>_*r1Cur
*  ;   
*
*  :OUT_DATA
*   GET_INSTANCE Resistor ::R r1 i  ==>_*r1Cur
*   1.0e12 *r1Cur f.*  ==>_*r1Volt
*   v_level *r1Volt  f.<=   if
*       0 5 0 SET_SUBCOMP_PRP
*       1 7 0 SET_SUBCOMP_PRP
*       1 8 0 SET_SUBCOMP_PRP
*       1 9 0 SET_SUBCOMP_PRP
*       1 10 0 SET_SUBCOMP_PRP
*       1 11 0 SET_SUBCOMP_PRP
*       1 12 0 SET_SUBCOMP_PRP
*       1 13 0 SET_SUBCOMP_PRP
*       1 14 0 SET_SUBCOMP_PRP
*   else
*       1 5 0 SET_SUBCOMP_PRP
*       0 7 0 SET_SUBCOMP_PRP
*       0 8 0 SET_SUBCOMP_PRP
*       0 9 0 SET_SUBCOMP_PRP
*       0 10 0 SET_SUBCOMP_PRP
*       0 11 0 SET_SUBCOMP_PRP
*       0 12 0 SET_SUBCOMP_PRP
*       0 13 0 SET_SUBCOMP_PRP
*       0 14 0 SET_SUBCOMP_PRP
*   endif
*  ;
*
*  :BEGIN_PLOT
*     UPDATE_SETTINGS
*  ;
* !!!END-INTERACT
xX2 29 ProbeX2
.subckt ProbeX2 1  
R1 1 0 1e12
.ends

*## Multisim Component X1 ##*
* !!!BEGIN-INTERACT
*  : v_level            ++++f2 ;
*  0.0       VARIABLE   r1Volt
*  0.0       VARIABLE   r1Cur
*
*  :UPDATE_SETTINGS
*       1 5 0 SET_SUBCOMP_PRP
*       0 7 0 SET_SUBCOMP_PRP
*       0 8 0 SET_SUBCOMP_PRP
*       0 9 0 SET_SUBCOMP_PRP
*       0 10 0 SET_SUBCOMP_PRP
*       0 11 0 SET_SUBCOMP_PRP
*       0 12 0 SET_SUBCOMP_PRP
*       0 13 0 SET_SUBCOMP_PRP
*       0 14 0 SET_SUBCOMP_PRP
*       0.0 ==>_*r1Volt
*       0.0 ==>_*r1Cur
*  ;   
*
*  :OUT_DATA
*   GET_INSTANCE Resistor ::R r1 i  ==>_*r1Cur
*   1.0e12 *r1Cur f.*  ==>_*r1Volt
*   v_level *r1Volt  f.<=   if
*       0 5 0 SET_SUBCOMP_PRP
*       1 7 0 SET_SUBCOMP_PRP
*       1 8 0 SET_SUBCOMP_PRP
*       1 9 0 SET_SUBCOMP_PRP
*       1 10 0 SET_SUBCOMP_PRP
*       1 11 0 SET_SUBCOMP_PRP
*       1 12 0 SET_SUBCOMP_PRP
*       1 13 0 SET_SUBCOMP_PRP
*       1 14 0 SET_SUBCOMP_PRP
*   else
*       1 5 0 SET_SUBCOMP_PRP
*       0 7 0 SET_SUBCOMP_PRP
*       0 8 0 SET_SUBCOMP_PRP
*       0 9 0 SET_SUBCOMP_PRP
*       0 10 0 SET_SUBCOMP_PRP
*       0 11 0 SET_SUBCOMP_PRP
*       0 12 0 SET_SUBCOMP_PRP
*       0 13 0 SET_SUBCOMP_PRP
*       0 14 0 SET_SUBCOMP_PRP
*   endif
*  ;
*
*  :BEGIN_PLOT
*     UPDATE_SETTINGS
*  ;
* !!!END-INTERACT
xX1 28 ProbeX1
.subckt ProbeX1 1  
R1 1 0 1e12
.ends

*## Multisim Component X6 ##*
* !!!BEGIN-INTERACT
*  : v_level            ++++f2 ;
*  0.0       VARIABLE   r1Volt
*  0.0       VARIABLE   r1Cur
*
*  :UPDATE_SETTINGS
*       1 5 0 SET_SUBCOMP_PRP
*       0 7 0 SET_SUBCOMP_PRP
*       0 8 0 SET_SUBCOMP_PRP
*       0 9 0 SET_SUBCOMP_PRP
*       0 10 0 SET_SUBCOMP_PRP
*       0 11 0 SET_SUBCOMP_PRP
*       0 12 0 SET_SUBCOMP_PRP
*       0 13 0 SET_SUBCOMP_PRP
*       0 14 0 SET_SUBCOMP_PRP
*       0.0 ==>_*r1Volt
*       0.0 ==>_*r1Cur
*  ;   
*
*  :OUT_DATA
*   GET_INSTANCE Resistor ::R r1 i  ==>_*r1Cur
*   1.0e12 *r1Cur f.*  ==>_*r1Volt
*   v_level *r1Volt  f.<=   if
*       0 5 0 SET_SUBCOMP_PRP
*       1 7 0 SET_SUBCOMP_PRP
*       1 8 0 SET_SUBCOMP_PRP
*       1 9 0 SET_SUBCOMP_PRP
*       1 10 0 SET_SUBCOMP_PRP
*       1 11 0 SET_SUBCOMP_PRP
*       1 12 0 SET_SUBCOMP_PRP
*       1 13 0 SET_SUBCOMP_PRP
*       1 14 0 SET_SUBCOMP_PRP
*   else
*       1 5 0 SET_SUBCOMP_PRP
*       0 7 0 SET_SUBCOMP_PRP
*       0 8 0 SET_SUBCOMP_PRP
*       0 9 0 SET_SUBCOMP_PRP
*       0 10 0 SET_SUBCOMP_PRP
*       0 11 0 SET_SUBCOMP_PRP
*       0 12 0 SET_SUBCOMP_PRP
*       0 13 0 SET_SUBCOMP_PRP
*       0 14 0 SET_SUBCOMP_PRP
*   endif
*  ;
*
*  :BEGIN_PLOT
*     UPDATE_SETTINGS
*  ;
* !!!END-INTERACT
xX6 33 ProbeX6
.subckt ProbeX6 1  
R1 1 0 1e12
.ends

*## Multisim Component U13 ##*
* !!!BEGIN-INTERACT
*
*  ( External state variables )
*  : Rshunt              ++++f1 ;
*  : Mode                 ++++i3 ;
*
*  ( Internal state variables )
*  0.0      VARIABLE   r1Volt
*  0.0      VARIABLE   r1Cur
*  0         VARIABLE   nTime
*  0         VARIABLE   nTimeCur
*
*  .( Loading the voltmeter.. )  cr
*
*  :  RESET
*       0.0  VALUE  SET_ANIMATION_TEXT
*       Rshunt  SET_INSTANCE Resistor ::R r1 resistance
*       1   RESET_ACDC
*       GET_LOCAL_TIME   ==>_*nTime
*  ;
*
*  :BEGIN_PLOT
*    RESET
*  ;
*
*  :OUT_DATA
*   GET_INSTANCE Resistor ::R r1 i  ==>_*r1Cur
*   (( Rshunt  *r1Cur  f.*  )) 1 ADD_ACDC
*   GET_LOCAL_TIME   ==>_*nTimeCur
*   *nTimeCur *nTime - 2 >= if
*   ((if Mode 1 GET_AC 1 GET_DC ))if   VALUE  SET_ANIMATION_TEXT
*   *nTimeCur   ==>_*nTime
*  endif
*  ;
*
* :  BEGIN_ANALYSIS 
*        RESET
*    ;
*     1  ACDC::ALLOC_INDEX
*
* :SIMULATION_CHANGED
*    ACDC::CIRCUIT_CHANGE
*    GET_LOCAL_TIME   ==>_*nTime
* ;
*
* !!!END-INTERACT

xU13 24 0  VoltmeterU13

.subckt voltmeterU13 1 2
R1 1 2 1e6
.ends

*## Multisim Component U5 ##*
* !!!BEGIN-INTERACT
*
*  ( External state variables )
*  : Rshunt              ++++f1 ;
*  : Mode                 ++++i3 ;
*
*  ( Internal state variables )
*  0.0      VARIABLE   r1Volt
*  0.0      VARIABLE   r1Cur
*  0         VARIABLE   nTime
*  0         VARIABLE   nTimeCur
*
*  .( Loading the voltmeter.. )  cr
*
*  :  RESET
*       0.0  VALUE  SET_ANIMATION_TEXT
*       Rshunt  SET_INSTANCE Resistor ::R r1 resistance
*       1   RESET_ACDC
*       GET_LOCAL_TIME   ==>_*nTime
*  ;
*
*  :BEGIN_PLOT
*    RESET
*  ;
*
*  :OUT_DATA
*   GET_INSTANCE Resistor ::R r1 i  ==>_*r1Cur
*   (( Rshunt  *r1Cur  f.*  )) 1 ADD_ACDC
*   GET_LOCAL_TIME   ==>_*nTimeCur
*   *nTimeCur *nTime - 2 >= if
*   ((if Mode 1 GET_AC 1 GET_DC ))if   VALUE  SET_ANIMATION_TEXT
*   *nTimeCur   ==>_*nTime
*  endif
*  ;
*
* :  BEGIN_ANALYSIS 
*        RESET
*    ;
*     1  ACDC::ALLOC_INDEX
*
* :SIMULATION_CHANGED
*    ACDC::CIRCUIT_CHANGE
*    GET_LOCAL_TIME   ==>_*nTime
* ;
*
* !!!END-INTERACT

xU5 6 11  VoltmeterU5

.subckt voltmeterU5 1 2
R1 1 2 1e6
.ends

*## Multisim Component X9 ##*
* !!!BEGIN-INTERACT
*  : v_level            ++++f2 ;
*  0.0       VARIABLE   r1Volt
*  0.0       VARIABLE   r1Cur
*
*  :UPDATE_SETTINGS
*       1 5 0 SET_SUBCOMP_PRP
*       0 7 0 SET_SUBCOMP_PRP
*       0 8 0 SET_SUBCOMP_PRP
*       0 9 0 SET_SUBCOMP_PRP
*       0 10 0 SET_SUBCOMP_PRP
*       0 11 0 SET_SUBCOMP_PRP
*       0 12 0 SET_SUBCOMP_PRP
*       0 13 0 SET_SUBCOMP_PRP
*       0 14 0 SET_SUBCOMP_PRP
*       0.0 ==>_*r1Volt
*       0.0 ==>_*r1Cur
*  ;   
*
*  :OUT_DATA
*   GET_INSTANCE Resistor ::R r1 i  ==>_*r1Cur
*   1.0e12 *r1Cur f.*  ==>_*r1Volt
*   v_level *r1Volt  f.<=   if
*       0 5 0 SET_SUBCOMP_PRP
*       1 7 0 SET_SUBCOMP_PRP
*       1 8 0 SET_SUBCOMP_PRP
*       1 9 0 SET_SUBCOMP_PRP
*       1 10 0 SET_SUBCOMP_PRP
*       1 11 0 SET_SUBCOMP_PRP
*       1 12 0 SET_SUBCOMP_PRP
*       1 13 0 SET_SUBCOMP_PRP
*       1 14 0 SET_SUBCOMP_PRP
*   else
*       1 5 0 SET_SUBCOMP_PRP
*       0 7 0 SET_SUBCOMP_PRP
*       0 8 0 SET_SUBCOMP_PRP
*       0 9 0 SET_SUBCOMP_PRP
*       0 10 0 SET_SUBCOMP_PRP
*       0 11 0 SET_SUBCOMP_PRP
*       0 12 0 SET_SUBCOMP_PRP
*       0 13 0 SET_SUBCOMP_PRP
*       0 14 0 SET_SUBCOMP_PRP
*   endif
*  ;
*
*  :BEGIN_PLOT
*     UPDATE_SETTINGS
*  ;
* !!!END-INTERACT
xX9 36 ProbeX9
.subckt ProbeX9 1  
R1 1 0 1e12
.ends

*## Multisim Component X8 ##*
* !!!BEGIN-INTERACT
*  : v_level            ++++f2 ;
*  0.0       VARIABLE   r1Volt
*  0.0       VARIABLE   r1Cur
*
*  :UPDATE_SETTINGS
*       1 5 0 SET_SUBCOMP_PRP
*       0 7 0 SET_SUBCOMP_PRP
*       0 8 0 SET_SUBCOMP_PRP
*       0 9 0 SET_SUBCOMP_PRP
*       0 10 0 SET_SUBCOMP_PRP
*       0 11 0 SET_SUBCOMP_PRP
*       0 12 0 SET_SUBCOMP_PRP
*       0 13 0 SET_SUBCOMP_PRP
*       0 14 0 SET_SUBCOMP_PRP
*       0.0 ==>_*r1Volt
*       0.0 ==>_*r1Cur
*  ;   
*
*  :OUT_DATA
*   GET_INSTANCE Resistor ::R r1 i  ==>_*r1Cur
*   1.0e12 *r1Cur f.*  ==>_*r1Volt
*   v_level *r1Volt  f.<=   if
*       0 5 0 SET_SUBCOMP_PRP
*       1 7 0 SET_SUBCOMP_PRP
*       1 8 0 SET_SUBCOMP_PRP
*       1 9 0 SET_SUBCOMP_PRP
*       1 10 0 SET_SUBCOMP_PRP
*       1 11 0 SET_SUBCOMP_PRP
*       1 12 0 SET_SUBCOMP_PRP
*       1 13 0 SET_SUBCOMP_PRP
*       1 14 0 SET_SUBCOMP_PRP
*   else
*       1 5 0 SET_SUBCOMP_PRP
*       0 7 0 SET_SUBCOMP_PRP
*       0 8 0 SET_SUBCOMP_PRP
*       0 9 0 SET_SUBCOMP_PRP
*       0 10 0 SET_SUBCOMP_PRP
*       0 11 0 SET_SUBCOMP_PRP
*       0 12 0 SET_SUBCOMP_PRP
*       0 13 0 SET_SUBCOMP_PRP
*       0 14 0 SET_SUBCOMP_PRP
*   endif
*  ;
*
*  :BEGIN_PLOT
*     UPDATE_SETTINGS
*  ;
* !!!END-INTERACT
xX8 35 ProbeX8
.subckt ProbeX8 1  
R1 1 0 1e12
.ends

*## Multisim Component X7 ##*
* !!!BEGIN-INTERACT
*  : v_level            ++++f2 ;
*  0.0       VARIABLE   r1Volt
*  0.0       VARIABLE   r1Cur
*
*  :UPDATE_SETTINGS
*       1 5 0 SET_SUBCOMP_PRP
*       0 7 0 SET_SUBCOMP_PRP
*       0 8 0 SET_SUBCOMP_PRP
*       0 9 0 SET_SUBCOMP_PRP
*       0 10 0 SET_SUBCOMP_PRP
*       0 11 0 SET_SUBCOMP_PRP
*       0 12 0 SET_SUBCOMP_PRP
*       0 13 0 SET_SUBCOMP_PRP
*       0 14 0 SET_SUBCOMP_PRP
*       0.0 ==>_*r1Volt
*       0.0 ==>_*r1Cur
*  ;   
*
*  :OUT_DATA
*   GET_INSTANCE Resistor ::R r1 i  ==>_*r1Cur
*   1.0e12 *r1Cur f.*  ==>_*r1Volt
*   v_level *r1Volt  f.<=   if
*       0 5 0 SET_SUBCOMP_PRP
*       1 7 0 SET_SUBCOMP_PRP
*       1 8 0 SET_SUBCOMP_PRP
*       1 9 0 SET_SUBCOMP_PRP
*       1 10 0 SET_SUBCOMP_PRP
*       1 11 0 SET_SUBCOMP_PRP
*       1 12 0 SET_SUBCOMP_PRP
*       1 13 0 SET_SUBCOMP_PRP
*       1 14 0 SET_SUBCOMP_PRP
*   else
*       1 5 0 SET_SUBCOMP_PRP
*       0 7 0 SET_SUBCOMP_PRP
*       0 8 0 SET_SUBCOMP_PRP
*       0 9 0 SET_SUBCOMP_PRP
*       0 10 0 SET_SUBCOMP_PRP
*       0 11 0 SET_SUBCOMP_PRP
*       0 12 0 SET_SUBCOMP_PRP
*       0 13 0 SET_SUBCOMP_PRP
*       0 14 0 SET_SUBCOMP_PRP
*   endif
*  ;
*
*  :BEGIN_PLOT
*     UPDATE_SETTINGS
*  ;
* !!!END-INTERACT
xX7 34 ProbeX7
.subckt ProbeX7 1  
R1 1 0 1e12
.ends

*## Multisim Component V9 ##*
vV9 27 0
+   pulse( 0 5 0 1e-009 1e-009
+   {50*0.01/10000}
+   {1/10000})

*## Multisim Component V7 ##*
vV7 25 0 dc 9.62 ac 0 0
+           distof1 0 0
+           distof2 0 0

*## Multisim Component U8 ##*
xU8 6 17 17 3T_VirtualU8 PARAMS: Vos=0 Ib=0 Ioff=0 Av=2000000 BW=100000000 Rin=10000000 Rout=10 Vpos=1200 Vneg=-1200 

.SUBCKT 3T_VirtualU8 in_pos in_neg out PARAMS: Av=500k BW=10Meg Rin=10Meg Rout=0 Vos=0 Ib=0 Ioff=0 Vpos=15 Vneg=-15 

* Input Stage: Rin, Ibias, Voffset
Vos in_pos 4 {Vos}
Ibias1 4 0 {Ib}
Ibias2 in_neg 0 {Ib}
Ios 4 in_neg {Ioff/2}
Rin 4 in_neg {Rin}

*Middle stage: Gain, frequency, voltage limiting
Bgain 0 6 I={v(4,in_neg)*Av/1meg }
R1 6 0 1meg
CP1 6 0 {Av/(2*pi*1meg*BW)}


Vpos 9 0 {Vpos}
Dlimit_pos 6 9 d1

Vneg 10 0 {Vneg}
Dlimit_neg 10 6 d1

.model d1 d(n=0.1) 

*Output stage: Buffer, output resistance 
E2 7 0 6 0 1
Rout 7 out {Rout}
.ends

*## Multisim Component U7 ##*
xU7 11 9 9 3T_VirtualU7 PARAMS: Vos=0 Ib=0 Ioff=0 Av=2000000 BW=100000000 Rin=10000000 Rout=10 Vpos=1200 Vneg=-1200 

.SUBCKT 3T_VirtualU7 in_pos in_neg out PARAMS: Av=500k BW=10Meg Rin=10Meg Rout=0 Vos=0 Ib=0 Ioff=0 Vpos=15 Vneg=-15 

* Input Stage: Rin, Ibias, Voffset
Vos in_pos 4 {Vos}
Ibias1 4 0 {Ib}
Ibias2 in_neg 0 {Ib}
Ios 4 in_neg {Ioff/2}
Rin 4 in_neg {Rin}

*Middle stage: Gain, frequency, voltage limiting
Bgain 0 6 I={v(4,in_neg)*Av/1meg }
R1 6 0 1meg
CP1 6 0 {Av/(2*pi*1meg*BW)}


Vpos 9 0 {Vpos}
Dlimit_pos 6 9 d1

Vneg 10 0 {Vneg}
Dlimit_neg 10 6 d1

.model d1 d(n=0.1) 

*Output stage: Buffer, output resistance 
E2 7 0 6 0 1
Rout 7 out {Rout}
.ends

*## Multisim Component R18 ##*
rR18 24 8 100000 vresR18  
.model vresR18 r(  )

*## Multisim Component R17 ##*
rR17 8 17 1000 vresR17  
.model vresR17 r(  )

*## Multisim Component R16 ##*
rR16 7 9 1000 vresR16  
.model vresR16 r(  )

*## Multisim Component R15 ##*
rR15 0 7 100000 vresR15  
.model vresR15 r(  )

*## Multisim Component U4 ##*
xU4 7 8 24 3T_VirtualU4 PARAMS: Vos=0 Ib=0 Ioff=0 Av=2000000 BW=100000000 Rin=10000000 Rout=10 Vpos=1200 Vneg=-1200 

.SUBCKT 3T_VirtualU4 in_pos in_neg out PARAMS: Av=500k BW=10Meg Rin=10Meg Rout=0 Vos=0 Ib=0 Ioff=0 Vpos=15 Vneg=-15 

* Input Stage: Rin, Ibias, Voffset
Vos in_pos 4 {Vos}
Ibias1 4 0 {Ib}
Ibias2 in_neg 0 {Ib}
Ios 4 in_neg {Ioff/2}
Rin 4 in_neg {Rin}

*Middle stage: Gain, frequency, voltage limiting
Bgain 0 6 I={v(4,in_neg)*Av/1meg }
R1 6 0 1meg
CP1 6 0 {Av/(2*pi*1meg*BW)}


Vpos 9 0 {Vpos}
Dlimit_pos 6 9 d1

Vneg 10 0 {Vneg}
Dlimit_neg 10 6 d1

.model d1 d(n=0.1) 

*Output stage: Buffer, output resistance 
E2 7 0 6 0 1
Rout 7 out {Rout}
.ends

*## Multisim Component V5 ##*
* !!!BEGIN-INTERACT
*  : increment  ++++f8 ;
*  : tmaxvalue  ++++f4 ;
*  : tminvalue  ++++f6 ;
*  0.0          constant mindval
*  100.0        constant maxdval
*  tmaxvalue    VARIABLE maxvalue
*  tminvalue    VARIABLE minvalue
*  50.0         VARIABLE setting
*  0            VARIABLE num_stored
*  0.0          VARIABLE setsourceval
*  0.0          VARIABLE zeroadj
*  0.0          VARIABLE setfactor
*  0            VARIABLE flag
*  0.0          VARIABLE outputval
*
*  :MAP_KEYBOARD_INPUT ++++k1 1 ++++K1  -1 ;
*
*  : UPDATE_SETTINGS
*     *flag 0 = if
*        LOAD_FICL_VARIABLES
*        ==>_*num_stored
*        ==>_*num_stored
*        *num_stored 0 > if
*           ==>_*setting 
*           ==>_*setsourceval
*          *setsourceval SET_INSTANCE vsource ::V V1  dc
*        endif
*      1 ==>_*flag
*      endif
*      0.01 *setting f.* ==>_*setfactor
*      tmaxvalue tminvalue f.- *setfactor f.* tminvalue f.+ ==>_*outputval
*      *outputval VALUE 0 SET_ANIMATION_TEXT_BYID
*      *outputval maxvalue GRADUAL_CHANGE_AT_RUN
*      *outputval *setting 2 0
*      STORE_FICL_VARIABLES
*  ;
*
*  :GRADUAL_CHANGE_AT_RUN locals| ref value |
*    value SET_INSTANCE vsource ::V V1  dc
*  ;
*
*  :KEYBOARD_INPUT locals| shift_state |
*     shift_state (float) increment f.* *setting  f.+  ==>_*setting
*     mindval maxdval *setting f.min f.max ==>_*setting
*     UPDATE_SETTINGS
*  ;
*
*  :BEGIN_PLOT
*     UPDATE_SETTINGS
*  ;
*
*  :BEGIN_ANALYSIS
*    UPDATE_SETTINGS
*  ;
*
*  : INIT_SLIDER
*      maxdval mindval 3 IMOUSE_SET
*  ;
*
*  : ON_IMOUSE_EVENT locals| eType fValue |
*    eType 9 = if
*      -1
*      fValue ==>_*setting
*    else
*      0
*    endif
*    UPDATE_SETTINGS
*  ;
*
*  : GET_INTERACT_VALUE locals| eType |
*      eType 0 = if
*        *setting
*      else eType 1 = if
*        mindval
*      else eType 2 = if
*        maxdval
*      else eType 3 = if
*        increment
*      else
*        0
*      endif endif endif endif
*  ;
*
*  : SET_INTERACT_VALUE locals| eType fValue |
*      eType 0 = if
*        fValue ==>_*setting
*      endif
*      UPDATE_SETTINGS
*  ;
*
*  :ON_USER_UPDATE
*    UPDATE_SETTINGS
*    INIT_SLIDER
*  ;
*
* !!!END-INTERACT
xV5 13 12 VariableDCVoltageV5
.subckt VariableDCVoltageV5 1 2
V1 1 2  10
.ends

*## Multisim Component U9 ##*
* !!!BEGIN-INTERACT
*  : Ohms_per_Volt  ++++f2 ;
*  0.0  VARIABLE    Resistor_Current
*  0.0  VARIABLE    Applied_Voltage
*  0.0  VARIABLE    Resulting_Resistance
*
* :OUT_DATA
*     GET_INSTANCE Vsource ::V Vsns i ==>_*Resistor_Current
*     *Resistor_Current 1.0e9 f.* ==>_*Applied_Voltage
*     *Applied_Voltage f.abs ==>_*Applied_Voltage
*     Ohms_per_Volt *Applied_Voltage f.* ==>_*Resulting_Resistance
*     *Resulting_Resistance VALUE 0 SET_ANIMATION_TEXT_BYID
* ;
*
* :ON_USER_UPDATE
*     0.0 ==>_*Resistor_Current
*     0.0 ==>_*Applied_Voltage
*     0.0 ==>_*Resulting_Resistance
* ;
*
* !!!END-INTERACT
xU9 12 13 20 19 Voltage_Controlled_ResistorU9 PARAMS: Ohms_per_Volt=0.004185
.subckt Voltage_Controlled_ResistorU9 1 2 4 5 PARAMS: Ohms_per_Volt=1
RIN 1 1a 1G
Vsns 1a 2 DC 0
EOUT  4 6 POLY(2) (1,2) (3,0) 0 0 0 0 {Ohms_per_Volt/1000}
FCOPY 0 3 VSENSE 1
RSENSOR 3 0 1K
* CURRENT SENSE
VSENSE  6 5 0
.ENDS

*## Multisim Component V4 ##*
* !!!BEGIN-INTERACT
*  : increment  ++++f8 ;
*  : tmaxvalue  ++++f4 ;
*  : tminvalue  ++++f6 ;
*  0.0          constant mindval
*  100.0        constant maxdval
*  tmaxvalue    VARIABLE maxvalue
*  tminvalue    VARIABLE minvalue
*  50.0         VARIABLE setting
*  0            VARIABLE num_stored
*  0.0          VARIABLE setsourceval
*  0.0          VARIABLE zeroadj
*  0.0          VARIABLE setfactor
*  0            VARIABLE flag
*  0.0          VARIABLE outputval
*
*  :MAP_KEYBOARD_INPUT ++++k1 1 ++++K1  -1 ;
*
*  : UPDATE_SETTINGS
*     *flag 0 = if
*        LOAD_FICL_VARIABLES
*        ==>_*num_stored
*        ==>_*num_stored
*        *num_stored 0 > if
*           ==>_*setting 
*           ==>_*setsourceval
*          *setsourceval SET_INSTANCE vsource ::V V1  dc
*        endif
*      1 ==>_*flag
*      endif
*      0.01 *setting f.* ==>_*setfactor
*      tmaxvalue tminvalue f.- *setfactor f.* tminvalue f.+ ==>_*outputval
*      *outputval VALUE 0 SET_ANIMATION_TEXT_BYID
*      *outputval maxvalue GRADUAL_CHANGE_AT_RUN
*      *outputval *setting 2 0
*      STORE_FICL_VARIABLES
*  ;
*
*  :GRADUAL_CHANGE_AT_RUN locals| ref value |
*    value SET_INSTANCE vsource ::V V1  dc
*  ;
*
*  :KEYBOARD_INPUT locals| shift_state |
*     shift_state (float) increment f.* *setting  f.+  ==>_*setting
*     mindval maxdval *setting f.min f.max ==>_*setting
*     UPDATE_SETTINGS
*  ;
*
*  :BEGIN_PLOT
*     UPDATE_SETTINGS
*  ;
*
*  :BEGIN_ANALYSIS
*    UPDATE_SETTINGS
*  ;
*
*  : INIT_SLIDER
*      maxdval mindval 3 IMOUSE_SET
*  ;
*
*  : ON_IMOUSE_EVENT locals| eType fValue |
*    eType 9 = if
*      -1
*      fValue ==>_*setting
*    else
*      0
*    endif
*    UPDATE_SETTINGS
*  ;
*
*  : GET_INTERACT_VALUE locals| eType |
*      eType 0 = if
*        *setting
*      else eType 1 = if
*        mindval
*      else eType 2 = if
*        maxdval
*      else eType 3 = if
*        increment
*      else
*        0
*      endif endif endif endif
*  ;
*
*  : SET_INTERACT_VALUE locals| eType fValue |
*      eType 0 = if
*        fValue ==>_*setting
*      endif
*      UPDATE_SETTINGS
*  ;
*
*  :ON_USER_UPDATE
*    UPDATE_SETTINGS
*    INIT_SLIDER
*  ;
*
* !!!END-INTERACT
xV4 10 5 VariableDCVoltageV4
.subckt VariableDCVoltageV4 1 2
V1 1 2  10
.ends

*## Multisim Component U3 ##*
* !!!BEGIN-INTERACT
*  : Ohms_per_Volt  ++++f2 ;
*  0.0  VARIABLE    Resistor_Current
*  0.0  VARIABLE    Applied_Voltage
*  0.0  VARIABLE    Resulting_Resistance
*
* :OUT_DATA
*     GET_INSTANCE Vsource ::V Vsns i ==>_*Resistor_Current
*     *Resistor_Current 1.0e9 f.* ==>_*Applied_Voltage
*     *Applied_Voltage f.abs ==>_*Applied_Voltage
*     Ohms_per_Volt *Applied_Voltage f.* ==>_*Resulting_Resistance
*     *Resulting_Resistance VALUE 0 SET_ANIMATION_TEXT_BYID
* ;
*
* :ON_USER_UPDATE
*     0.0 ==>_*Resistor_Current
*     0.0 ==>_*Applied_Voltage
*     0.0 ==>_*Resulting_Resistance
* ;
*
* !!!END-INTERACT
xU3 10 5 18 20 Voltage_Controlled_ResistorU3 PARAMS: Ohms_per_Volt=0.004185
.subckt Voltage_Controlled_ResistorU3 1 2 4 5 PARAMS: Ohms_per_Volt=1
RIN 1 1a 1G
Vsns 1a 2 DC 0
EOUT  4 6 POLY(2) (1,2) (3,0) 0 0 0 0 {Ohms_per_Volt/1000}
FCOPY 0 3 VSENSE 1
RSENSOR 3 0 1K
* CURRENT SENSE
VSENSE  6 5 0
.ENDS

*## Multisim Component V3 ##*
* !!!BEGIN-INTERACT
*  : increment  ++++f8 ;
*  : tmaxvalue  ++++f4 ;
*  : tminvalue  ++++f6 ;
*  0.0          constant mindval
*  100.0        constant maxdval
*  tmaxvalue    VARIABLE maxvalue
*  tminvalue    VARIABLE minvalue
*  50.0         VARIABLE setting
*  0            VARIABLE num_stored
*  0.0          VARIABLE setsourceval
*  0.0          VARIABLE zeroadj
*  0.0          VARIABLE setfactor
*  0            VARIABLE flag
*  0.0          VARIABLE outputval
*
*  :MAP_KEYBOARD_INPUT ++++k1 1 ++++K1  -1 ;
*
*  : UPDATE_SETTINGS
*     *flag 0 = if
*        LOAD_FICL_VARIABLES
*        ==>_*num_stored
*        ==>_*num_stored
*        *num_stored 0 > if
*           ==>_*setting 
*           ==>_*setsourceval
*          *setsourceval SET_INSTANCE vsource ::V V1  dc
*        endif
*      1 ==>_*flag
*      endif
*      0.01 *setting f.* ==>_*setfactor
*      tmaxvalue tminvalue f.- *setfactor f.* tminvalue f.+ ==>_*outputval
*      *outputval VALUE 0 SET_ANIMATION_TEXT_BYID
*      *outputval maxvalue GRADUAL_CHANGE_AT_RUN
*      *outputval *setting 2 0
*      STORE_FICL_VARIABLES
*  ;
*
*  :GRADUAL_CHANGE_AT_RUN locals| ref value |
*    value SET_INSTANCE vsource ::V V1  dc
*  ;
*
*  :KEYBOARD_INPUT locals| shift_state |
*     shift_state (float) increment f.* *setting  f.+  ==>_*setting
*     mindval maxdval *setting f.min f.max ==>_*setting
*     UPDATE_SETTINGS
*  ;
*
*  :BEGIN_PLOT
*     UPDATE_SETTINGS
*  ;
*
*  :BEGIN_ANALYSIS
*    UPDATE_SETTINGS
*  ;
*
*  : INIT_SLIDER
*      maxdval mindval 3 IMOUSE_SET
*  ;
*
*  : ON_IMOUSE_EVENT locals| eType fValue |
*    eType 9 = if
*      -1
*      fValue ==>_*setting
*    else
*      0
*    endif
*    UPDATE_SETTINGS
*  ;
*
*  : GET_INTERACT_VALUE locals| eType |
*      eType 0 = if
*        *setting
*      else eType 1 = if
*        mindval
*      else eType 2 = if
*        maxdval
*      else eType 3 = if
*        increment
*      else
*        0
*      endif endif endif endif
*  ;
*
*  : SET_INTERACT_VALUE locals| eType fValue |
*      eType 0 = if
*        fValue ==>_*setting
*      endif
*      UPDATE_SETTINGS
*  ;
*
*  :ON_USER_UPDATE
*    UPDATE_SETTINGS
*    INIT_SLIDER
*  ;
*
* !!!END-INTERACT
xV3 4 3 VariableDCVoltageV3
.subckt VariableDCVoltageV3 1 2
V1 1 2  10
.ends

*## Multisim Component U2 ##*
* !!!BEGIN-INTERACT
*  : Ohms_per_Volt  ++++f2 ;
*  0.0  VARIABLE    Resistor_Current
*  0.0  VARIABLE    Applied_Voltage
*  0.0  VARIABLE    Resulting_Resistance
*
* :OUT_DATA
*     GET_INSTANCE Vsource ::V Vsns i ==>_*Resistor_Current
*     *Resistor_Current 1.0e9 f.* ==>_*Applied_Voltage
*     *Applied_Voltage f.abs ==>_*Applied_Voltage
*     Ohms_per_Volt *Applied_Voltage f.* ==>_*Resulting_Resistance
*     *Resulting_Resistance VALUE 0 SET_ANIMATION_TEXT_BYID
* ;
*
* :ON_USER_UPDATE
*     0.0 ==>_*Resistor_Current
*     0.0 ==>_*Applied_Voltage
*     0.0 ==>_*Resulting_Resistance
* ;
*
* !!!END-INTERACT
xU2 4 3 0 15 Voltage_Controlled_ResistorU2 PARAMS: Ohms_per_Volt=0.004185
.subckt Voltage_Controlled_ResistorU2 1 2 4 5 PARAMS: Ohms_per_Volt=1
RIN 1 1a 1G
Vsns 1a 2 DC 0
EOUT  4 6 POLY(2) (1,2) (3,0) 0 0 0 0 {Ohms_per_Volt/1000}
FCOPY 0 3 VSENSE 1
RSENSOR 3 0 1K
* CURRENT SENSE
VSENSE  6 5 0
.ENDS

*## Multisim Component V1 ##*
* !!!BEGIN-INTERACT
*  : increment  ++++f8 ;
*  : tmaxvalue  ++++f4 ;
*  : tminvalue  ++++f6 ;
*  0.0          constant mindval
*  100.0        constant maxdval
*  tmaxvalue    VARIABLE maxvalue
*  tminvalue    VARIABLE minvalue
*  50.0         VARIABLE setting
*  0            VARIABLE num_stored
*  0.0          VARIABLE setsourceval
*  0.0          VARIABLE zeroadj
*  0.0          VARIABLE setfactor
*  0            VARIABLE flag
*  0.0          VARIABLE outputval
*
*  :MAP_KEYBOARD_INPUT ++++k1 1 ++++K1  -1 ;
*
*  : UPDATE_SETTINGS
*     *flag 0 = if
*        LOAD_FICL_VARIABLES
*        ==>_*num_stored
*        ==>_*num_stored
*        *num_stored 0 > if
*           ==>_*setting 
*           ==>_*setsourceval
*          *setsourceval SET_INSTANCE vsource ::V V1  dc
*        endif
*      1 ==>_*flag
*      endif
*      0.01 *setting f.* ==>_*setfactor
*      tmaxvalue tminvalue f.- *setfactor f.* tminvalue f.+ ==>_*outputval
*      *outputval VALUE 0 SET_ANIMATION_TEXT_BYID
*      *outputval maxvalue GRADUAL_CHANGE_AT_RUN
*      *outputval *setting 2 0
*      STORE_FICL_VARIABLES
*  ;
*
*  :GRADUAL_CHANGE_AT_RUN locals| ref value |
*    value SET_INSTANCE vsource ::V V1  dc
*  ;
*
*  :KEYBOARD_INPUT locals| shift_state |
*     shift_state (float) increment f.* *setting  f.+  ==>_*setting
*     mindval maxdval *setting f.min f.max ==>_*setting
*     UPDATE_SETTINGS
*  ;
*
*  :BEGIN_PLOT
*     UPDATE_SETTINGS
*  ;
*
*  :BEGIN_ANALYSIS
*    UPDATE_SETTINGS
*  ;
*
*  : INIT_SLIDER
*      maxdval mindval 3 IMOUSE_SET
*  ;
*
*  : ON_IMOUSE_EVENT locals| eType fValue |
*    eType 9 = if
*      -1
*      fValue ==>_*setting
*    else
*      0
*    endif
*    UPDATE_SETTINGS
*  ;
*
*  : GET_INTERACT_VALUE locals| eType |
*      eType 0 = if
*        *setting
*      else eType 1 = if
*        mindval
*      else eType 2 = if
*        maxdval
*      else eType 3 = if
*        increment
*      else
*        0
*      endif endif endif endif
*  ;
*
*  : SET_INTERACT_VALUE locals| eType fValue |
*      eType 0 = if
*        fValue ==>_*setting
*      endif
*      UPDATE_SETTINGS
*  ;
*
*  :ON_USER_UPDATE
*    UPDATE_SETTINGS
*    INIT_SLIDER
*  ;
*
* !!!END-INTERACT
xV1 2 1 VariableDCVoltageV1
.subckt VariableDCVoltageV1 1 2
V1 1 2  10
.ends

*## Multisim Component U1 ##*
* !!!BEGIN-INTERACT
*  : Ohms_per_Volt  ++++f2 ;
*  0.0  VARIABLE    Resistor_Current
*  0.0  VARIABLE    Applied_Voltage
*  0.0  VARIABLE    Resulting_Resistance
*
* :OUT_DATA
*     GET_INSTANCE Vsource ::V Vsns i ==>_*Resistor_Current
*     *Resistor_Current 1.0e9 f.* ==>_*Applied_Voltage
*     *Applied_Voltage f.abs ==>_*Applied_Voltage
*     Ohms_per_Volt *Applied_Voltage f.* ==>_*Resulting_Resistance
*     *Resulting_Resistance VALUE 0 SET_ANIMATION_TEXT_BYID
* ;
*
* :ON_USER_UPDATE
*     0.0 ==>_*Resistor_Current
*     0.0 ==>_*Applied_Voltage
*     0.0 ==>_*Resulting_Resistance
* ;
*
* !!!END-INTERACT
xU1 1 2 16 0 Voltage_Controlled_ResistorU1 PARAMS: Ohms_per_Volt=0.004185
.subckt Voltage_Controlled_ResistorU1 1 2 4 5 PARAMS: Ohms_per_Volt=1
RIN 1 1a 1G
Vsns 1a 2 DC 0
EOUT  4 6 POLY(2) (1,2) (3,0) 0 0 0 0 {Ohms_per_Volt/1000}
FCOPY 0 3 VSENSE 1
RSENSOR 3 0 1K
* CURRENT SENSE
VSENSE  6 5 0
.ENDS

*## Multisim Component R10 ##*
rR10 6 16 348 vresR10  
.model vresR10 r(  )

*## Multisim Component R9 ##*
rR9 11 15 348 vresR9  
.model vresR9 r(  )

*## Multisim Component R8 ##*
rR8 19 11 348 vresR8  
.model vresR8 r(  )

*## Multisim Component R7 ##*
rR7 18 6 348 vresR7  
.model vresR7 r(  )


.SUBCKT TIL_RCV__NON__1 1 2
* TIL Receiver Model  1 = input, 2 = A/D out
 aADCin1 [1] [2] ADC
.MODEL ADC adc_bridge (in_low= 2.5 in_high = 2.5)
.ENDS

.SUBCKT TIL_DRV__NON__1 1 2
* TIL Driver Model  1 = D/A input, 2 = out
 aDACin1 [1] [2] aDAC
.MODEL aDAC dac_bridge (out_low= 0 out_high = 5 out_undef = 2.5)
.ENDS

.subckt ADC8__ADC_DAC__1 vin vref+ vref- F0d F1d F2d F3d F4d F5d F6d F7d clk eoc PARAMS: conversion_time=1u
xU3 clk EOC_clk ONESHOT PARAMS: pulse_width={conversion_time}
a2 EOC_clk eoc DELAY
.model DELAY d_delay(rise_delay=2n fall_delay=2n)

a1 Vin [F0 F1 F2 F3 F4 F5 F6 F7]  Vref+ Vref- ADC_core

**FFs
ab0 F0 ~EOC_clk DGND DGND F0d 100 FF
ab1 F1 ~EOC_clk DGND DGND F1d 101 FF
ab2 F2 ~EOC_clk DGND DGND F2d 102 FF
ab3 F3 ~EOC_clk DGND DGND F3d 103 FF
ab4 F4 ~EOC_clk DGND DGND F4d 104 FF
ab5 F5 ~EOC_clk DGND DGND F5d 105 FF
ab6 F6 ~EOC_clk DGND DGND F6d 106 FF
ab7 F7 ~EOC_clk DGND DGND F7d 107 FF

.MODEL ADC_core ew_nla2d( )
.MODEL FF d_dff(clk_delay=1n set_delay=1n reset_delay=1n ic=0 rise_delay=1n fall_delay=1n)


.subckt ONESHOT in out PARAMS: pulse_width=100n
aU8 in 4 DIGITAL_DELAY
aU7 4 2 NOT
aU6  [4 2] 9 AND2
aU5 in 1 NOT
aU3  [in 1] 6 AND2
aU2 U2_OPEN_S U2_OPEN_R U2_OPEN_CLK 6 9 out U2_OPEN_notQ SR_FF
.MODEL SR_FF d_SRff (clk_delay = 1n set_delay = 1n reset_delay= 1n ic = 0 rise_delay = 1n fall_delay = 1n)
.MODEL AND2 d_and ( rise_delay = 1n fall_delay = 1n)
.MODEL NOT d_inverter (rise_delay = 10n fall_delay = 10n)
.model DIGITAL_DELAY d_delay (rise_delay={pulse_width} fall_delay={pulse_width} delay_type="transport")
.ends
     .ends


